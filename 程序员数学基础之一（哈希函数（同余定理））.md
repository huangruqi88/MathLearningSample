## 同余定理（哈希函数就是去余）


#### 同余定义：两个正数a和b，他们除以正正数m得到的余数相等，a和b对于模m同余。

#### 哈希（也称散列）：将任意长度的输入，通过哈希算法，压缩为某以固定长度的输出。

　　举例：如何实现100W条数据记录高速存取？理想状态--->开辟连续的空间存放这些数据，减少寻址时间。但是受限于调价，并没有能够容纳100W条记录的连续地址空间。

　　思路：是否可以让系统提供若干个较小的连续空间，这些空间彼此之间是被分隔开来的，但是内部是连续的，并足以容纳1W条记录连续存放，那么我们就可以使用余数和同余定理来设计一个散列函数，并实现哈希表的结构。

　　**第一步：**
 
　　以计算明年的今天是明年的星期几为例***(一个星期数七天，所以以365 除以7得出余数，在通过今天是星期几，余数相同的放在同一个空间中。)***

　　![星期为例.png](https://s2.ax1x.com/2019/07/09/ZyZTET.png)

　　推导出公式如下：

　　![推导公式.png](https://s2.ax1x.com/2019/07/09/ZyNRTe.png)

　　　如图所示，x表示等待被转换的数值，而size表示有限储存空间大小，mod表示取余操作。**通过余数可以将任何数值转换为有限范围内的一个数值，然后根据这个新的数值，来确定将数据放在何处。**

　　对照我们上面的这个例子，我们可以通过记录标号模100的余数，指定100W条数据除以100，余1（如1,101,201...）的放在第一个可用空间，余2（2,102，202...）的放在第二个可用空间。以此类推将余数为0的放在第100个空间。

　　![可用空间.png](https://s2.ax1x.com/2019/07/09/ZyWYCt.png)

　　为了**增加数据散列的随机程度**，我们还可以在公式中增加一个较大的**随机数MAX**,如下

　　![随机数散列.png](https://s2.ax1x.com/2019/07/09/Zy744e.png)

　　解释：***假设随机数MAX是590199，那么针对标号为1的记录重新计算，最后结果是0，所以就把随机计算后的数分配到0对应的空间；如果针对标号为101，随机数假设为627901，对应的结果应该是2所以就把随机计算后的数分配到2对应的空间，依次类推。这样就会针对原标号进行一个随机分配。使用MAX随机数更适合将数据重新洗牌的应用场景。***

　　**扩展：**引入MAX随机数加密算法可以增强加密算法的保密程度。例如：我们要加密一组三位数，设定加密规则为：

　　1.先对每个三位数的个、十、百位数，都加上一个较大的随机数。

　　2.然后将每位上的数都除以7，用所得的余数代替个、十、百位数。

　　3.将第一位和最后一位交换。

　　以上就是一个基本的加密过程。

　　比如我要们要加密的数字625，根据刚才的规则，假设随机数为590127。那么百位、十位和各位加上这个随机数，就变成590133
，590129,590132，然后三位分别除以7求余后得到5,4,1。最终，我们可以得到加密后的数字就是415。以上规则我们都已经知道了，所以可以反推得到原始数据就是625。

　　![MAX加密举例.png](https://s2.ax1x.com/2019/07/10/ZccKkn.png)